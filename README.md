# 【PHP】CSVから案件を取り出し、分類して書き出し

## 開発環境／実行環境
PHP 8.1.10  
※windows PCにインストールしてコマンドプロンプトで実行

## 特徴／説明
- コマンドプロンプトで該当するディレクトリに移動し、「php ○○.php」
- CSVファイルのリストの中から未完了案件を取り出す
- 取り出した案件を担当者別に分類して新CSVファイルにそれぞれ書き出し
- 変数の値を変更して汎用

## 汎用のための変更する変数
```var.php
/* 読み込みたいCSVファイル */
$read_file = 'Book1.csv';

/* 一致させたい項目・値 */
$item_match = "完了日";
$val_match = "";

/* 分類したい項目 */
$item_sort = "担当者";

/* 新CSVファイル名（接頭辞） */
$fine_name = "test";
```

## 変換前CSVテーブル
・Book1.csv
| No. | ドメイン | 担当者 | 完了日 | パスワード | 備考 |
|:----------:|:-----------:|:------------:|:------------:|:------------:|:------------:|
| 1 | 21wtblau.com | 加藤 |  | 2bw7gygq |
| 2 | wlcv0tyw.com | 加藤 | 2023/7/18 | jwzac3o7 |
| 3 | tvehusl1.com | 滝藤 |  | n80drh3m |
| 4 | 6pm658wv.com | 滝藤 | 2023/8/17 | y80gt2x9 |
| 5 | q14z8onl.com | 滝藤 |  | wsc73elf |

## 変換後CSVテーブル
・test_1.csv
| No. | ドメイン | 担当者 | 完了日 | パスワード | 備考 |
|:----------:|:-----------:|:------------:|:------------:|:------------:|:------------:|
| 1 | 21wtblau.com | 加藤 |  | 2bw7gygq | 
| 7 | dds5pube.com | 加藤 |  | mcii5w1v | 
| 19 | r3svxsss.com | 加藤 |  | hxgrh846 | 
| 26 | xo7r1g32.com | 加藤 |  | 7ijubafw | 
| 33 | it6r9slw.com | 加藤 |  | dd2lglt6 | 

・test_2.csv
| No. | ドメイン | 担当者 | 完了日 | パスワード | 備考 |
|:----------:|:-----------:|:------------:|:------------:|:------------:|:------------:|
| 3 | tvehusl1.com | 滝藤 |  | n80drh3m | 
| 5 | q14z8onl.com | 滝藤 |  | wsc73elf | 
| 6 | ird6kvoq.com | 滝藤 |  | mghe98vu | 
| 8 | 0r7xn1xd.com | 滝藤 |  | kv5yc0tk | 
| 10 | lje9xk4a.com | 滝藤 |  | 9mjnkr23 | 

・test_3.csv
| No. | ドメイン | 担当者 | 完了日 | パスワード | 備考 |
|:----------:|:-----------:|:------------:|:------------:|:------------:|:------------:|
| 29 | 0b4cyegr.com | 佐藤 |  | 5diawqfu | 
| 44 | u2a4frz4.com | 佐藤 |  | 0kq1voz5 | 
| 45 | fvd6cjvz.com | 佐藤 |  | ssca5i72 | 
| 47 | 8ddzaxlt.com | 佐藤 |  | pfu3leg0 | 
| 73 | 0lyknfvo.com | 佐藤 |  | gwy99key | 

## コマンドプロンプト実行後 例
```end.cmd
#### 取得したい項目 #######
・完了日
・担当者

#### 一致した物件を検出 #######
1,21wtblau.com,加藤,,2bw7gygq,,
3,tvehusl1.com,滝藤,,n80drh3m,,
5,q14z8onl.com,滝藤,,wsc73elf,,
…

#### 分類 #######
・加藤
・滝藤
・佐藤

#### 新CSVファイルに書き出し #######
test_1.csv
test_2.csv
test_3.csv

#### 完了しました。########
```
